{"ast":null,"code":"import { MaterialCount } from \"./materialCount\";\nexport class Material {\n  constructor(chess) {\n    this.chess = chess;\n    this.whiteCount = new MaterialCount();\n    this.blackCount = new MaterialCount();\n    this.whiteKingPosition = {\n      x: -1,\n      y: -1\n    };\n    this.whitePawnsPositions = Array();\n    this.blackKingPosition = {\n      x: -1,\n      y: -1\n    };\n    this.blackPawnsPositions = Array();\n  }\n\n  description() {\n    return \"Material\";\n  }\n\n  score() {\n    let score = 0;\n    this.whiteCount.clear();\n    this.blackCount.clear();\n    this.checkMaterial();\n    score = this.whiteCount.score() - this.blackCount.score();\n    return score;\n  }\n\n  checkMaterial() {\n    let board = this.chess.board();\n\n    for (let i = 0; i < 8; i++) {\n      for (let j = 0; j < 8; j++) {\n        let position = board[i][j];\n\n        if (position) {\n          if ((position === null || position === void 0 ? void 0 : position.color) == 'w') {\n            this.countPieceMaterial(position === null || position === void 0 ? void 0 : position.type, this.whiteCount);\n\n            if ((position === null || position === void 0 ? void 0 : position.type) === 'k') {\n              this.whiteKingPosition = {\n                x: j,\n                y: i\n              };\n            } else if ((position === null || position === void 0 ? void 0 : position.type) === 'p') {\n              this.whitePawnsPositions.push({\n                x: j,\n                y: i\n              });\n            }\n          } else {\n            this.countPieceMaterial(position === null || position === void 0 ? void 0 : position.type, this.blackCount);\n\n            if ((position === null || position === void 0 ? void 0 : position.type) === 'k') {\n              this.blackKingPosition = {\n                x: j,\n                y: i\n              };\n            } else if ((position === null || position === void 0 ? void 0 : position.type) === 'p') {\n              this.blackPawnsPositions.push({\n                x: j,\n                y: i\n              });\n            }\n          }\n        }\n      }\n    }\n\n    this.whitePawnsPositions.sort((a, b) => {\n      return a.x - b.x;\n    });\n    this.blackPawnsPositions.sort((a, b) => {\n      return a.x - b.x;\n    });\n  }\n\n  countPieceMaterial(piece, count) {\n    switch (piece) {\n      case \"p\":\n        count.pawns++;\n        break;\n\n      case \"n\":\n        count.knighs++;\n        break;\n\n      case \"b\":\n        count.bishops++;\n        break;\n\n      case \"r\":\n        count.rooks++;\n        break;\n\n      case \"q\":\n        count.queens++;\n        break;\n    }\n  }\n\n  evaluatePieceMaterial(piece) {\n    switch (piece) {\n      case \"p\":\n        return 1;\n\n      case \"n\":\n        return 3;\n\n      case \"b\":\n        if (this.chess.turn() == \"w\" && this.blackCount.bishops == 2) {\n          return 3.5;\n        } else if (this.chess.turn() == \"b\" && this.whiteCount.bishops == 2) {\n          return 3.5;\n        } else {\n          return 3;\n        }\n\n      case \"r\":\n        return 5;\n\n      case \"q\":\n        return 9;\n\n      default:\n        return 0;\n    }\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}