{"ast":null,"code":"import { MaterialCount } from \"./materialCount\";\nexport class Material {\n  constructor(chess) {\n    this.chess = chess;\n    this.whiteCount = new MaterialCount();\n    this.blackCount = new MaterialCount();\n    this.whiteKingPosition = {\n      x: -1,\n      y: -1\n    };\n    this.blackKingPosition = {\n      x: -1,\n      y: -1\n    };\n  }\n\n  description() {\n    return \"Material\";\n  }\n\n  score() {\n    var _a, _b, _c, _d, _e;\n\n    let score = 0;\n    this.whiteCount.clear();\n    this.blackCount.clear();\n    let board = this.chess.board();\n\n    for (let i = 0; i < 8; i++) {\n      for (let j = 0; j < 8; j++) {\n        if (board[i][j]) {\n          if (((_a = board[i][j]) === null || _a === void 0 ? void 0 : _a.color) == 'w') {\n            this.countPieceMaterial((_b = board[i][j]) === null || _b === void 0 ? void 0 : _b.type, this.whiteCount);\n\n            if (((_c = board[i][j]) === null || _c === void 0 ? void 0 : _c.type) === 'k') {\n              this.whiteKingPosition = {\n                x: i,\n                y: j\n              };\n            }\n          } else {\n            this.countPieceMaterial((_d = board[i][j]) === null || _d === void 0 ? void 0 : _d.type, this.blackCount);\n\n            if (((_e = board[i][j]) === null || _e === void 0 ? void 0 : _e.type) === 'k') {\n              this.blackKingPosition = {\n                x: i,\n                y: j\n              };\n            }\n          }\n        }\n      }\n    }\n\n    score = this.whiteCount.score() - this.blackCount.score();\n    return score;\n  }\n\n  countPieceMaterial(piece, count) {\n    switch (piece) {\n      case \"p\":\n        count.pawns++;\n        break;\n\n      case \"n\":\n        count.knighs++;\n        break;\n\n      case \"b\":\n        count.bishops++;\n        break;\n\n      case \"r\":\n        count.rooks++;\n        break;\n\n      case \"q\":\n        count.queens++;\n        break;\n    }\n  }\n\n  evaluatePieceMaterial(piece) {\n    switch (piece) {\n      case \"p\":\n        return 1;\n\n      case \"n\":\n        return 3;\n\n      case \"b\":\n        if (this.chess.turn() == \"w\" && this.blackCount.bishops == 2) {\n          return 3.5;\n        } else if (this.chess.turn() == \"b\" && this.whiteCount.bishops == 2) {\n          return 3.5;\n        } else {\n          return 3;\n        }\n\n      case \"r\":\n        return 5;\n\n      case \"q\":\n        return 9;\n\n      default:\n        return 0;\n    }\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}